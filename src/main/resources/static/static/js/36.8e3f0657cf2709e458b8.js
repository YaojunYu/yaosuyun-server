webpackJsonp([36],{Dyj4:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.table-expand[data-v-55a67f3c] {\n  font-size: 0;\n  border-bottom: #d0d0d0 1px solid;\n}\n.table-expand label[data-v-55a67f3c] {\n  width: 90px;\n  color: #99a9bf;\n}\n.table-expand .el-form-item[data-v-55a67f3c] {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 50%;\n}\n",""])},Wb7g:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("cAgV"),r=a("0xDb"),l=a("vLgD");var i={name:"orderTable",directives:{waves:s.a},data:function(){return{tableKey:0,list:null,total:null,listLoading:!0,listQuery:{page:1,size:10,between:"",time:"",keyword:"",status:""},statusOptions:[{label:"正常完成",key:"finished"},{label:"送回撤销",key:"back,backing,backed"},{label:"已超时",key:"timeout"},{label:"故障异常",key:"blocked"},{label:"顾客取消",key:"canceled,deleted"},{label:"司机拒绝",key:"rejected"},{label:"正在配送",key:"got,arrived,send"}],timePickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.setTime(t.getTime()+864e5),a.setHours(0,0,0,0),t.setHours(0,0,0,0),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.setTime(t.getTime()+864e5),a.setHours(0,0,0,0),t.setHours(0,0,0,0),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.setTime(t.getTime()+864e5),a.setHours(0,0,0,0),t.setHours(0,0,0,0),e.$emit("pick",[a,t])}}]},downloadLoading:!1}},filters:{statusFilter:function(e){return{finished:"success",blocked:"danger",backing:"warn",rejected:"danger",timeout:"danger",backed:"success"}[e]}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,function(e){if(e.time){var t=Object(r.c)(e.time[0],"{y}-{m}-{d} {h}:{i}:{s}"),a=Object(r.c)(e.time[1],"{y}-{m}-{d} {h}:{i}:{s}");e.between=t+","+a}else e.between="";return Object(l.a)({url:"/managers/orders",method:"get",params:e})}(this.listQuery).then(function(t){e.list=t.data.data.list,e.total=t.data.data.total,e.listLoading=!1})},tableRowClassName:function(e){var t=e.row;e.rowIndex;return{finished:"success-row",blocked:"danger-row",rejected:"warning-row"}[t.status]},handleFilter:function(){this.listQuery.page=1,this.getList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return"createTime"===e?Object(r.c)(t[e]):t[e]})})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container list-container"},[a("div",{staticClass:"filter-container"},[a("el-date-picker",{staticClass:"filter-item",attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00"],"picker-options":e.timePickerOptions},model:{value:e.listQuery.time,callback:function(t){e.$set(e.listQuery,"time",t)},expression:"listQuery.time"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{clearable:"",placeholder:"订单状态"},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"350px"},attrs:{placeholder:"订单号/顾客/司机/地址"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.handleFilter(t)}},model:{value:e.listQuery.keyword,callback:function(t){e.$set(e.listQuery,"keyword",t)},expression:"listQuery.keyword"}}),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("搜索")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticClass:"list-table",staticStyle:{width:"100%"},attrs:{data:e.list,"element-loading-text":"加载中...",fit:"","highlight-current-row":"",stripe:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"right",inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"订单编号"}},[a("span",[e._v(e._s(t.row.orderId))])]),e._v(" "),a("el-form-item",{attrs:{label:"订单状态"}},["got"===t.row.status?a("span",[e._v("已派单")]):"arrived"===t.row.status?a("span",[e._v("已到达取货")]):"send"===t.row.status?a("span",[e._v("已发货")]):"finished"===t.row.status?a("span",[e._v("已签收")]):"created"===t.row.status?a("span",[e._v("已创建")]):"finished"===t.row.status?a("span",[e._v("已签收")]):"canceled"===t.row.status?a("span",[e._v("已取消")]):"deleted"===t.row.status?a("span",[e._v("用户删除")]):"back"===t.row.status?a("span",[e._v("申请送回")]):"back"===t.row.status?a("span",[e._v("申请送回")]):"backing"===t.row.status?a("span",[e._v("同意送回")]):"backed"===t.row.status?a("span",[e._v("已送回")]):"timeout"===t.row.status?a("span",[e._v("已超时")]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"订单类型"}},["real"===t.row.orderType?a("span",[e._v("实时")]):"book"===t.row.orderType?a("span",[e._v("预定")]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"配送类型"}},["private"===t.row.deliverType?a("span",[e._v("专属配送")]):"public"===t.row.deliverType?a("span",[e._v("公共配送")]):e._e()]),e._v(" "),a("el-form-item",{attrs:{label:"运输空间"}},[a("span",[e._v(e._s(t.row.capacity))])]),e._v(" "),a("el-form-item",{attrs:{label:"订单总价"}},[a("span",[e._v(e._s(t.row.totalPrice))])]),e._v(" "),a("el-form-item",{attrs:{label:"里程费用"}},[a("span",[e._v(e._s(t.row.mileagePrice))])]),e._v(" "),a("el-form-item",{attrs:{label:"等待费用"}},[a("span",[e._v(e._s(t.row.waitPrice))])]),e._v(" "),a("el-form-item",{attrs:{label:"运输距离"}},[a("span",[e._v(e._s(t.row.distance/1e3)+"公里")])]),e._v(" "),a("el-form-item",{attrs:{label:"运输耗时"}},[a("span",[e._v(e._s(t.row.duration)+"分钟")])]),e._v(" "),a("el-form-item",{attrs:{label:"等待时长"}},[a("span",[e._v(e._s(t.row.waitMinutes)+"分钟")])]),e._v(" "),a("el-form-item",{attrs:{label:"开始时间"}},[a("span",[e._v(e._s(t.row.startTime))])])],1),e._v(" "),a("el-form",{staticClass:"table-expand",attrs:{"label-position":"right",inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"发货人电话"}},[a("span",[e._v(e._s(t.row.originPhone))])]),e._v(" "),a("el-form-item",{attrs:{label:"发货人姓名"}},[a("span",[e._v(e._s(t.row.originPerson))])]),e._v(" "),a("el-form-item",{attrs:{label:"发货地点"}},[a("span",[e._v(e._s(t.row.originAddressTitle))]),e._v(" "),a("span",[e._v("-"+e._s(t.row.originAddressDetail))])]),e._v(" "),a("el-form-item",{attrs:{label:"收货地点"}},[a("span",[e._v(e._s(t.row.destinationAddressTitle))]),e._v(" "),a("span",[e._v("-"+e._s(t.row.destinationAddressAddress))])]),e._v(" "),a("el-form-item",{attrs:{label:"收货人电话"}},[a("span",[e._v(e._s(t.row.destinationPhone))])]),e._v(" "),a("el-form-item",{attrs:{label:"收货人姓名"}},[a("span",[e._v(e._s(t.row.destinationPerson))])])],1),e._v(" "),null!=t.row.driverId?a("el-form",{staticClass:"table-expand",attrs:{"label-position":"right",inline:"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"司机编号"}},[a("span",[e._v(e._s(t.row.driverId))])]),e._v(" "),a("el-form-item",{attrs:{label:"司机姓名"}},[a("span",[e._v(e._s(t.row.driverName))])]),e._v(" "),a("el-form-item",{attrs:{label:"司机电话"}},[a("span",[e._v(e._s(t.row.driverPhone))])]),e._v(" "),a("el-form-item",{attrs:{label:"车辆编号"}},[a("span",[e._v(e._s(t.row.vehicleId))])]),e._v(" "),a("el-form-item",{attrs:{label:"车牌号"}},[a("span",[e._v(e._s(t.row.licenseNo))])]),e._v(" "),a("el-form-item",{attrs:{label:"车辆颜色"}},[a("span",[e._v(e._s(t.row.vehicleColor))])]),e._v(" "),a("el-form-item",{attrs:{label:"车辆类型"}},[a("span",[e._v(e._s(t.row.vehicleType))])]),e._v(" "),a("el-form-item",{attrs:{label:"车辆品牌"}},[a("span",[e._v(e._s(t.row.vehicleBrand))])])],1):e._e(),e._v(" "),a("el-form",{staticClass:"table-expand",attrs:{"label-position":"right",inline:"","label-width":"100px"}},["book"==t.row.orderType?a("el-form-item",{attrs:{label:"预定时间"}},[a("span",[e._v(e._s(t.row.bookTime))])]):e._e(),e._v(" "),null!=t.row.receiveTime?a("el-form-item",{attrs:{label:"取货到达时间"}},[a("span",[e._v(e._s(t.row.receiveTime))])]):e._e(),e._v(" "),null!=t.row.sendTime?a("el-form-item",{attrs:{label:"发货时间"}},[a("span",[e._v(e._s(t.row.sendTime))])]):e._e(),e._v(" "),null!=t.row.receiveTime?a("el-form-item",{attrs:{label:"签收时间"}},[a("span",[e._v(e._s(t.row.receiveTime))])]):e._e(),e._v(" "),null!=t.row.completeTime?a("el-form-item",{attrs:{label:"完成时间"}},[a("span",[e._v(e._s(t.row.completeTime))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("span",[e._v(e._s(t.row.createTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"更新时间"}},[a("span",[e._v(e._s(t.row.updateTime))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"订单号",prop:"orderId",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"类型",prop:"orderType"},scopedSlots:e._u([{key:"default",fn:function(t){return["real"===t.row.orderType?a("span",[e._v("实时")]):"book"===t.row.orderType?a("span",[e._v("预定")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"配送类型",prop:"deliverType"},scopedSlots:e._u([{key:"default",fn:function(t){return["private"===t.row.deliverType?a("span",[e._v("专属配送")]):"public"===t.row.deliverType?a("span",[e._v("公共配送")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"发货人",prop:"originPerson"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"发货人电话",prop:"originPhone",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"收货人",prop:"destinationPerson"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"收货人电话",prop:"destinationPhone",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"运输空间",prop:"capacity"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},["got"===t.row.status?a("span",[e._v("已派单")]):"arrived"===t.row.status?a("span",[e._v("已到达取货")]):"send"===t.row.status?a("span",[e._v("已发货")]):"finished"===t.row.status?a("span",[e._v("已签收")]):"created"===t.row.status?a("span",[e._v("已创建")]):"canceled"===t.row.status?a("span",[e._v("已取消")]):"deleted"===t.row.status?a("span",[e._v("用户删除")]):"back"===t.row.status?a("span",[e._v("申请送回")]):"backing"===t.row.status?a("span",[e._v("同意送回")]):"backed"===t.row.status?a("span",[e._v("已送回")]):"timeout"===t.row.status?a("span",[e._v("已超时")]):"rejected"===t.row.status?a("span",[e._v("已拒绝")]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createTime))])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("xXF0")},"data-v-55a67f3c",null);t.default=o.exports},xXF0:function(e,t,a){var s=a("Dyj4");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("3b633a29",s,!0)}});